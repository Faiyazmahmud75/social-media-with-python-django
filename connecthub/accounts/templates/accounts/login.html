{% extends "base.html" %}
{% load static %}
{% block title %} Login {% endblock title %}

{% block content %}
<div class="container py-5 mb-5">
<!-- Error Messages -->  
 
<div class="alertbox">
  {% if error_message %}
  <div class="alert alert-danger text-center">
    {{ error_message }}
  </div>
  {% endif %}
</div>


  <div class="row justify-content-center pt-5">
    <div class="col-lg-8">
      <div class="test-login text-start m-auto">
        <h5 class="text-secondary">Test login</h5>
        <p class="mb-0 text-start txt-link"><strong>Username:</strong> alex</p>
        <p class="text-start txt-link mb-0"><strong>Password:</strong> Connecthub25</p>
        <small class="text-secondary">Use test login credentials or create your own account</small>
      </div>
      <div class="card shadow-sm border-0">
        <div class="row g-1 align-items-center">
          <!-- Left side: Image -->
          <div class="col-md-6 d-inline d-md-block">
            <img src="https://i.postimg.cc/9Fm8zs0T/login.png" alt="Login Image" class="img-fluid">
          </div>
          <!-- Right side: Form -->
          <div class="col-md-6">
            <div class="card-body">
              <h2 class="text-center txt-primary mb-3">Welcome Back!</h2>
              <p class="text-muted text-center">Login to continue your journey</p>

              <form id="login-form" method="POST" class="needs-validation" novalidate>
                {% csrf_token %}
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="id_username" placeholder="Username" name="username" required>
                    <label for="id_username">Username</label>
                    <div class="invalid-feedback">Please enter your username.</div>
                    <div class="text-danger small" id="username-error"></div>  <!-- Error message -->
                </div>

                <div class="form-floating mb-3">
                    <input type="password" class="form-control" id="id_password" placeholder="Password" name="password" required>
                    <label for="id_password">Password</label>
                    <div class="invalid-feedback">Please enter your password.</div>
                    <div class="text-danger small" id="password-error"></div>  <!-- Error message -->
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn my-bg-primary btn-secondary">Login</button>
                </div>
            </form>


              <div class="mt-3 text-center">
                <a href="{% url 'password_reset' %}" class="text-secondary">Forgot Password?</a>
              </div>
              <div class="mt-3 text-center">
                <span>Don't have an account?</span>
                <a href="{% url 'register' %}" class="txt-link">Register</a>
              </div>
            </div>
          </div> <!-- End col-md-7 -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
  })()
</script>

{% endblock %}
